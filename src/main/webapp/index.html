<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <title>iDeal - IRMA</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta value="http://10.0.1.31:8080/irma_ideal_issuer/server/" name="irma-web-server">
        <meta value="https://privacybydesign.foundation/tomcat/irma_api_server/api/v2/" name="irma-api-server">
        <link rel="stylesheet" href="https://privacybydesign.foundation/tomcat/irma_api_server/bower_components/bootstrap/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="common.css"/>
        <script src="https://privacybydesign.foundation/tomcat/irma_api_server/bower_components/jquery/dist/jquery.js" defer></script>
        <script src="https://privacybydesign.foundation/tomcat/irma_api_server/client/irma.js" defer></script>
        <script src="messages.en.js" defer></script>
        <script src="common.js" defer></script>
    </head>
    <body>
        <div class="container-fluid">
            <h1>iDeal + iDIN attributes</h1>

            <ul class="steps">
                <li class="step">1</li>
                <li class="step">2</li>
                <li class="step">3</li>
                <li class="step">4</li>
            </ul>

            <div id="result-alert" class="alert hidden"></div>

            <div id="transaction-alert" class="alert alert-warning hidden">
                <strong>You already have a transaction in progress.</strong>
                Continue the transaction <a href="">where you left</a>.
            </div>

            <div id="token-alert" class="alert alert-warning hidden">
                <strong>You already requested iDeal attributes.</strong>
                Jump ahead to request <a href="?ec=ideal-phase3" class="idin">iDIN attributes</a>
                or load <a href="?ec=ideal" class="ideal">iDeal attributes</a>
                in your IRMA app, if you haven't already done so.
            </div>

            <div id="pane-ideal">
                <p>Here you can request iDeal attributes.</p>
                <!-- disabled for now
                <div class="form-group">
                    <label for="input-email">Email address</label>
                    <div class="input-group">
                        <input id="input-email" type="email" class="form-control readonly" readonly/>
                        <span class="input-group-btn">
                            <button class="btn btn-default" id="input-pick-email">Pick</button>
                        </span>
                    </div>
                </div>
                -->
                <form id="form-ideal-request" onsubmit="return false;">
                    <div class="form-group form-bank">
                        <label for="input-ideal-bank">iDeal Bank</label>
                        <select id="input-ideal-bank" class="form-control" required>
                            <option disabled value="">Loading...</option>
                        </select>
                    </div>
                    <div class="form-group form-submit text-right">
                        <input type="submit" id="btn-ideal-request" class="btn btn-primary" value="Request iDeal attributes"/>
                    </div>
                </form>

                <p>
                    When you've received your iDeal attributes but did not
                    request your iDIN attributes, you can still receive them.
                </p>
                <div class="text-right">
                    <button id="btn-disclose-ideal" class="btn btn-default">Continue after iDeal</button>
                </div>
            </div>

            <div id="pane-ideal-result-ok" class="hidden">
                <p>
                    The iDeal transaction was completed. You can issue iDeal
                    attributes here, or decide to skip this step.
                </p>
                <div class="text-right">
                    <button id="btn-ideal-skip" class="btn btn-default">Skip this step</button>
                    <button id="btn-ideal-issue" class="btn btn-primary">Issue</button>
                </div>
            </div>

            <div id="pane-ideal-result-fail" class="hidden">
                <p>
                    <button id="btn-ideal-retry" class="btn btn-primary">Retry</button>
                </p>
            </div>

            <div id="pane-idin">
                <p>After receiving these initial attributes, you can get more attributes with iDIN:</p>
                <form id="form-idin-request" onsubmit="return false;">
                    <div class="form-group form-bank">
                        <label for="input-idin-bank">iDIN Bank</label>
                        <select id="input-idin-bank" class="form-control" required>
                            <option disabled value="">Loading...</option>
                        </select>
                    </div>
                    <div class="form-group form-submit text-right">
                        <input type="submit" id="btn-idin-request" class="btn btn-primary" value="Request iDIN attributes"/>
                    </div>
                </form>
            </div>

            <div id="pane-idin-result">
                <p>You can now load the iDIN attributes into your phone.</p>
            </div>
        </div>
    </body>
</html>
